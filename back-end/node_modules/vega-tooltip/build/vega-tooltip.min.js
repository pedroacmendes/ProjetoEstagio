!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).vegaTooltip={})}(this,(function(t){"use strict";var e="0.23.0",n="#vg-tooltip-element {\n  visibility: hidden;\n  padding: 8px;\n  position: fixed;\n  z-index: 1000;\n  font-family: sans-serif;\n  font-size: 11px;\n  border-radius: 3px;\n  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);\n  /* The default theme is the light theme. */\n  background-color: rgba(255, 255, 255, 0.95);\n  border: 1px solid #d9d9d9;\n  color: black; }\n  #vg-tooltip-element.visible {\n    visibility: visible; }\n  #vg-tooltip-element h2 {\n    margin-top: 0;\n    margin-bottom: 10px;\n    font-size: 13px; }\n  #vg-tooltip-element img {\n    max-width: 200px;\n    max-height: 200px; }\n  #vg-tooltip-element table {\n    border-spacing: 0; }\n    #vg-tooltip-element table tr {\n      border: none; }\n      #vg-tooltip-element table tr td {\n        overflow: hidden;\n        text-overflow: ellipsis;\n        padding-top: 2px;\n        padding-bottom: 2px; }\n        #vg-tooltip-element table tr td.key {\n          color: #808080;\n          max-width: 150px;\n          text-align: right;\n          padding-right: 4px; }\n        #vg-tooltip-element table tr td.value {\n          display: block;\n          max-width: 300px;\n          max-height: 7em;\n          text-align: left; }\n  #vg-tooltip-element.dark-theme {\n    background-color: rgba(32, 32, 32, 0.9);\n    border: 1px solid #f5f5f5;\n    color: white; }\n    #vg-tooltip-element.dark-theme td.key {\n      color: #bfbfbf; }\n";const i="vg-tooltip-element",o={offsetX:10,offsetY:10,id:i,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:l,maxDepth:2};function l(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function r(t){if(!/^[A-Za-z]+[-:.\w]*$/.test(t))throw new Error("Invalid HTML ID");return n.toString().replace(i,t)}function s(t,e,n){return t.fields=e||[],t.fname=n,t}function a(t){throw Error(t)}var c=Array.isArray;function d(t){return t===Object(t)}function p(t){return"string"==typeof t}function u(t){return c(t)?"["+t.map(u)+"]":d(t)||p(t)?JSON.stringify(t).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):t}var f=[],h=(function(t,e){var n=function(t){var e,n,i,o=[],l=null,r=0,s=t.length,c="";function d(){o.push(c+t.substring(e,n)),c="",e=n+1}for(t+="",e=n=0;n<s;++n)if("\\"===(i=t[n]))c+=t.substring(e,n),c+=t.substring(++n,++n),e=n;else if(i===l)d(),l=null,r=-1;else{if(l)continue;e===r&&'"'===i||e===r&&"'"===i?(e=n+1,l=i):"."!==i||r?"["===i?(n>e&&d(),r=e=n+1):"]"===i&&(r||a("Access path missing open bracket: "+t),r>0&&d(),r=0,e=n+1):n>e?d():e=n+1}return r&&a("Access path missing closing bracket: "+t),l&&a("Access path missing closing quote: "+t),n>e&&(n++,d()),o}(t),i="return _["+n.map(u).join("][")+"];";s(Function("_",i),[t=1===n.length?n[0]:t],e||t)}("id"),s((function(t){return t}),f,"identity"),s((function(){return 0}),f,"zero"),s((function(){return 1}),f,"one"),s((function(){return!0}),f,"true"),s((function(){return!1}),f,"false"),function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(t);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(t,i[o])&&(n[i[o]]=t[i[o]])}return n});function g(t,e,n){if(c(t))return`[${t.map(t=>e(p(t)?t:b(t,n))).join(", ")}]`;if(d(t)){let i="";const o=t,{title:l,image:r}=o,s=h(o,["title","image"]);l&&(i+=`<h2>${e(l)}</h2>`),r&&(i+=`<img src="${e(r)}">`);const a=Object.keys(s);if(a.length>0){i+="<table>";for(const t of a){let o=s[t];void 0!==o&&(d(o)&&(o=b(o,n)),i+=`<tr><td class="key">${e(t)}:</td><td class="value">${e(o)}</td></tr>`)}i+="</table>"}return i||"{}"}return e(t)}function m(t){const e=[];return function(n,i){if("object"!=typeof i||null===i)return i;const o=e.indexOf(this)+1;return e.length=o,e.length>t?"[Object]":e.indexOf(i)>=0?"[Circular]":(e.push(i),i)}}function b(t,e){return JSON.stringify(t,m(e))}function y(t,e,n,i){let o=t.clientX+n;o+e.width>window.innerWidth&&(o=+t.clientX-n-e.width);let l=t.clientY+i;return l+e.height>window.innerHeight&&(l=+t.clientY-i-e.height),{x:o,y:l}}class x{constructor(t){this.options=Object.assign(Object.assign({},o),t);const e=this.options.id;if(this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const t=document.createElement("style");t.setAttribute("id",this.options.styleId),t.innerHTML=r(e);const n=document.head;n.childNodes.length>0?n.insertBefore(t,n.childNodes[0]):n.appendChild(t)}this.el=document.getElementById(e),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",e),this.el.classList.add("vg-tooltip"),document.body.appendChild(this.el))}tooltipHandler(t,e,n,i){if(null==i||""===i)return void this.el.classList.remove("visible",this.options.theme+"-theme");this.el.innerHTML=g(i,this.options.sanitize,this.options.maxDepth),this.el.classList.add("visible",this.options.theme+"-theme");const{x:o,y:l}=y(e,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.setAttribute("style",`top: ${l}px; left: ${o}px`)}}const v=e;t.DEFAULT_OPTIONS=o,t.Handler=x,t.calculatePosition=y,t.createDefaultStyle=r,t.default=function(t,e){const n=new x(e);return t.tooltip(n.call).run(),n},t.escapeHTML=l,t.formatValue=g,t.replacer=m,t.stringify=b,t.version=v,Object.defineProperty(t,"__esModule",{value:!0})}));